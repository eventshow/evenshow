{% extends 'base.html' %}
{% block content %}
{% load static %}
<img class="img-detail" src="{{object.picture}}">

<div class="principal-detail">
    <div class="col m6 rectangle-info" id="host-datail">
        <img class="img-host" alt='anfitrion' src="{{object.created_by.profile.picture}}">
        <div class="col m5 host-rating">
            <i class="fa fa-star"><i
                    class="rating-search">&nbsp{{event.created_by.profile.avg_host_score|floatformat:1|default_if_none:"n/a"|default:"n/a" }}</i></i>
        </div>
    </div>

    <div class="col m6 rectangle-info" id="detail-info">
        <h2 class="title-detail">duración</h2>
        <h2 class="subtitle-detail">{{ duration }}</h2>
    </div>

    <div class="col m6 rectangle-info separated1" id="detail-info">
        <h2 class="title-detail">aforo</h2>
        <h2 class="subtitle-detail">{{ object.capacity }}</h2>
    </div>

    <div class="col m6 rectangle-info separated2" id="detail-info">
        <h2 class="title-detail">idioma</h2>
        <h2 class="subtitle-detail">{{ object.lang }}</h2>

        {% if user_can_enroll %}
        <form action="{% url 'enroll_event' object.pk %}" method="POST">
            {% csrf_token %}
            {% if user.is_authenticated %}
            <script src="https://checkout.stripe.com/checkout.js" class="stripe-button" id="separated3"
                data-key="{{ stripe_key }}" data-description="Comprar entrada" data-amount="500" data-locale="auto"
                data-label="INSCRIBIRSE">

                </script>
            <script>
                document.getElementsByClassName("stripe-button-el")[0].setAttribute("class", "waves-effect waves-light btn-large button-detail");
            </script>
            {% else %}
            <a class="waves-effect waves-light btn-large button-detail" id="enroll"
                href="{% url 'login' %}">INSCRIBIRSE</a>
            {% endif %}
        </form>
        {% endif %}
    </div>

    <div class="col m6 rectangle-info separated4" id="detail-info">
        <h2 class="title-detail">precio</h2>
        <h2 class="subtitle-detail">{{ object.price }} €</h2>
    </div>
</div>

<div class="section-detail">
    <div class="col-3 title-section">
        <h1 class="title-section">Descripción</h1>
    </div>
    <div class="col-9 title-section">
        <h3 class="title-text">{{object.description}}</h3>
    </div>
    <hr>
</div>

<div class="section-detail">
    <div class="col-3 title-section">
        <h1 class="title-section">Anfitrión</h1>
    </div>

    <div class="col-9 title-section pos">
        <h3 class="name-host-detail">{{object.created_by.first_name}} {{object.created_by.last_name}}</h3>
        <h3 class="host-bio">{{object.created_by.profile.bio}}</h3>
        <img class="img-bio" alt='anfitrion' src="{{object.created_by.profile.picture}}">
        <div class="rating-bio">
            <i class="fa fa-star"><i
                    class="rating-search">&nbsp{{event.created_by.profile.avg_host_score|floatformat:1|default_if_none:"n/a"|default:"n/a" }}</i></i>
        </div>
    </div>
    <hr>

    <div class="col-9 title-section pos">
        <h1 class="title-section">Dirección</h1>

        <h3 class="address-detail">{{object.location_street}} {{object.location_number}}<br> {{object.location_city}}
        </h3>
        <div class="col-md-7 map-detail">
            <br>
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3171.280887375974!2d-5.988450184736177!3d37.35953007983709!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd126c2b2b60f659%3A0x957d9e61ca03f160!2sAv.%20de%20la%20Reina%20Mercedes%2C%2041012%20Sevilla!5e0!3m2!1ses!2ses!4v1584287236974!5m2!1ses!2ses"
                width="838" height="346" frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false"
                tabindex="0"></iframe>
            <br>
        </div>
    </div>
    <hr>

    <div class="col-9 title-section pos">
        <h1 class="title-section">Comentarios de otros húespedes <br> asistieron a algún evento de este anfitrión</h1>
        {% for rating in ratings %}
        <div class="comments">
            <img class="img-comment" alt='' src="{{rating.created_by.profile.picture}}">
            <h3 class="name-host-detail user-comment">{{rating.created_by.username}}</h3>
            <div class="user-rat">
                <i class="fa fa-star"><i
                        class="rating-search">&nbsp{{event.created_by.profile.avg_attendee_score|floatformat:1|default_if_none:"n/a"|default:"n/a" }}</i></i>
            </div>
            <h3 class="comment-detail">{{rating.comment}}</h3>
        </div>
        {% endfor %}
    </div>
</div>

<style>
    .page-footer {
        width: 100%;
        margin-top: 20% !important;
    }
</style>

{% endblock %}

<style>
    body {
        background-image: url("{% static 'css/images/cena.jpg'%}");
        background-size: cover;
        display: flex;
        min-height: 100vh;
        flex-direction: column;
    }

    main {
        flex: 1 0 auto;
    }

    .page-footer {
        width: 100%;
        margin-bottom: 29% !important;
    }
</style>