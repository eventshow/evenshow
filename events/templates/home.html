{%extends 'base.html'%}
{% load static %}



{% block content %}

<style>
    body {
        background-image: url("{% static 'css/images/cena.jpg'%}");
        background-size: cover;
        display: flex;
        min-height: 100vh;
        flex-direction: column;
    }

    main {
        flex: 1 0 auto;
    }

    .page-footer {
        width: 100%;
    }
</style>

<div class="container">
    <div class="row">
        <div class="col s6 form-home">

            <form class="form-eventshow" method="POST" action="{% url 'home' %}">
                {% csrf_token %}
                <h3 class="">Encuentra y reserva experiencias únicas {{ user_name }}</h3>
                <div class="row">
                    <div class="col s9 location-prov">
                        <label>UBICACIÓN
                            {{ form.location }}
                            {{ form.location.errors }}
                        </label>
                    </div>
                </div>
                <div class="row">
                    <div class="col s6">
                        <label>FECHA
                            {{ form.date }}
                            {{ form.date.errors }}
                        </label>
                    </div>
                    <div class="col s6">
                        <label>HORA
                            {{ form.start_hour }}
                            {{ form.start_hour.errors }}
                        </label>
                    </div>
                </div>

                <button class="waves-effect waves-light btn-large right">Buscar</button>
            </form>

            <form class="" method="POST" action="{% url 'event_nearby_search_home' %}">
                {% csrf_token %}
                <input type="hidden" name="longitude">
                <input type="hidden" name="latitude">

                <button class="waves-effect waves-light btn-small location "><i
                                    class="location-em material-icons ">location_on</i></button>
            </form>


        </div>
    </div>
</div>

<script>
window.onload = getLocation();

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    alert ("Geolocation is not supported by this browser.");
  }
}

function showPosition(position) {
   let lat = position.coords.latitude;
   let long = position.coords.longitude;
   $("input[name='latitude']").val(lat);
   $("input[name='longitude']").val(long);
}
</script>


{% endblock %}